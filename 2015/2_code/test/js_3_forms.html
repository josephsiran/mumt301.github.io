<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>JavaScript class 3</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="./css/main.css">
        <script src="js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>
    </head>

    <body id="body">
    <h1 id="title">JavaScript class 3</h1>	
	<div id="container">
		<h2>
			Forms and inputs
		</h2>
		HTML forms are used to pass data to a server. An HTML form can contain input elements like 
		text fields, checkboxes, radio-buttons, submit buttons and more. 
		A form can also contain select lists, textarea, fieldset, legend, and label elements.
		<p>
		Forms' syntax uses the <code>form</code> tag to create an HTML form, and 
		the <code>input</code> element is used to select user information. 
		</p>
		<p>
			A simple example of an input text field would be:
		</p>
		
		<code><pre>
&ltform&gt
	User name: &ltinput type="text" name="name"&gt
	Artist name: &ltinput type="text" name="artist"&gt
&lt/form&gt
		</pre></code>
		<form>
		User name: <input type="text" name="name"><br>
		Artist name: <input type="text" name="artist">
		</form>
		<p>
			There are also other available fields:
		</p>
		<code><pre>
&ltform&gt
	User name: &ltinput type="text" name="name"&gt
	&ltinput type="radio" name="sex" value="male"&gt Male
	&ltinput type="radio" name="sex" value="female"&gt Female&ltbr&gt
	Password: &ltinput type="password" name="pwd"&gt&ltbr&gt
	Artist name: &ltinput type="text" name="artist"&ltbr&gt
	&ltinput type="checkbox" name="retrieve" value="discography"&gtRetrieve album names&ltbr&gt
	&ltinput type="checkbox" name="retrieve" value="members"&gtRetrieve member names 
&lt/form&gt
		</pre></code>
		<form>
		User name: <input type="text" name="name">
		<input type="radio" name="sex" value="male"> Male
		<input type="radio" name="sex" value="female"> Female<br>
		Password: <input type="password" name="pwd"><br>
		Artist name: <input type="text" name="artist"><br>
		<input type="checkbox" name="retrieve" value="discography">Retrieve album names<br>
		<input type="checkbox" name="retrieve" value="members">Retrieve member names
		</form>		
	
		<h2>
			Using the data from forms in JavaScript
		</h2>
		We usually want to use the data a user has entered in a form. To accomplishing this, we follow 
		the same procedure explained before. In other words, we first create the form:
		<code><pre>
&ltform id="query"&gt
	User name: &ltinput type="text" name="name"&gt
	&ltinput type="radio" name="sex" value="male"&gt Male
	&ltinput type="radio" name="sex" value="female"&gt Female&ltbr&gt
	Password: &ltinput type="password" name="pwd"&gt&ltbr&gt
	Artist name: &ltinput type="text" name="artist"&ltbr&gt
	&ltinput type="checkbox" name="retrieve" value="discography"&gtRetrieve album names&ltbr&gt
	&ltinput type="checkbox" name="retrieve" value="members"&gtRetrieve member names&ltbr&gt
	&ltinput type="button" onclick="queryData()" value="Retrieve"&gt
&lt/form&gt
		</pre></code>
		When the user press the "Retrieve" button, the <code>queryData()</code> function is called. 
		If we want to know the name of the user and the name of the artist about which the user wants 
		to retrieve some information, we can parse it from the data passed from the HTML form to the function.
	
		<code><pre>&ltscript&gt
	function queryData(){
		var x = document.getElementById("query");
		userName = x.elements["name"].value;
		artistName = x.elements["artist"].value;
		console.log(userName, artistName);
		document.getElementById("queryResult").innerHTML = 
			userName + ", the data you want for " + artistName + " is:"
		}
&lt/script&gt
		</pre></code>
		This script prints the values of <code>userName</code> and <code>artistName</code> into
		the HTML element with ID <code>queryResult</code>, and so we create it:
		
		<code><pre>&ltp id="queryResult"&gt&lt/p&gt
		</pre></code>
		
		Finally, a working version of the code:
		
		<form id="query">
		User name: <input type="text" name="name">
		<input type="radio" name="sex" value="male"> Male
		<input type="radio" name="sex" value="female"> Female<br>
		Password: <input type="password" name="pwd"><br>
		Artist name: <input type="text" name="artist"><br>
		<input type="checkbox" name="retrieve" value="discography">Retrieve album names<br>
		<input type="checkbox" name="retrieve" value="members">Retrieve member names<br>
		<input type="button" onclick="queryData()" value="Retrieve">
		</form>		
		
		<p id="queryResult">
		</p>

		<p id="retrievedResult">
		</p>
		<script>
			function queryData() {
				var x = document.getElementById("query");
				userName = x.elements["name"].value;
				artistName = x.elements["artist"].value;
				console.log(userName, artistName);
				document.getElementById("queryResult").innerHTML = 
					userName + ", the data you want for " + artistName + " is:"
				queryURL = "http://developer.echonest.com/api/v4/artist/biographies?api_key=&name=" + artistName + "&format=xml&results=10&start=0"
				retrievedData = httpGet(queryURL)
				document.getElementById("retrievedResult").innerHTML = retrievedData;
			}
			
			function httpGet(theUrl) {
				var xmlHttp = null;
				xmlHttp = new XMLHttpRequest();
				xmlHttp.open( "GET", theUrl, false );
				xmlHttp.send( null );
				return xmlHttp.responseText;
			}
		</script>
		
		<br>
		<a href="./js_3.html">Go to recap JavaScript class 3</a>
		</div>
		
	</body>


</html>