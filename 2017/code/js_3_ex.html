<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>Music APIs</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="../css/main.css">
	<script src="../js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>
	<style>
		table,
		tr,
		th,
		td {
			margin-left: auto;
			margin-right: auto;
			text-align: center;
			font-size: 15px;
			border: 2px solid green;
			border-collapse: collapse;
			font-family: "Lucida Grande";
			background-color: #ffffff;
		}
		
		tr,
		td {
			font-style: bold;
			padding: 5px;
		}
		
		th {
			background-color: #a7c942;
			color: #ffffff;
		}
		
		.center {
			margin: auto;
		}
	</style>
</head>

<body id="body">
	<h1 id="title">Music APIs</h1>
	<div id="container">
		<h2>In-class exercise</h2> 
		<p>Create a webpage that returns the MusicBrainz ID (MBID) for a given user-entered artist.</p>
		

		<!-- form for getting user's data		 -->

		<p>Steps:</p>
		<ol>
		<li>Create form to retrieve user's data</li>
		<li>Parse the data from the form to extract the name of the artist</li>
		<li>Determine the MusicBrainz call you have to make to retrieve artists MBIDs</li>
		<li>Make the HTTP request call. You can make use of the httpGet function in this page</li>
		<li>Parse the response from the server </li>
		<li>Render the data into the Web browser (using divs would be nice)</li>
		<li>Style the results</li>
		</ol>



		<form id="artist">
			Artist name?
			<input type="text" name="artist">
			<input type="button" onclick="queryArtist()" value="Search for MBID for artist!">
		</form>

		<p id="mbid"></p>

		<script>
			function httpGet(theUrl) {
				var xmlHttp = new XMLHttpRequest();
				xmlHttp.open("GET", theUrl, false);
				xmlHttp.send();
				return xmlHttp.responseXML;
			}


			function queryArtist() {
				
				// getting the data from the form
				var artistNameUser = document.getElementById("artist");
				artistName = artistNameUser.elements["artist"].value;
				console.log(artistName);

				// Create the MB call to retrieve the MBID
				mbBaseURL = "https://musicbrainz.org/ws/2/";
				mbResource = "artist?query=";
				queryURL = mbBaseURL + mbResource + artistName;
				console.log(queryURL);

				// Create the HTTP request 
				retrievedData = httpGet(queryURL);
				console.log(retrievedData)

				artistData = retrievedData.getElementsByTagName("artist")[0];
				artistMBID = artistData.id;
				console.log(artistMBID);

				document.getElementById("mbid").innerHTML = artistMBID;

			}
		</script>



</body>

</html>